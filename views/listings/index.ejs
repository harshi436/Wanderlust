<% layout("layouts/boilerplate.ejs") %><%#code body change na hoo toh iss link se bioler.ejs takk jaoo fir wah body ko aqyure karo  %>


<style>
#filters{
  display:flex;
  flex-wrap:wrap;
  align-items: center;
           /* consistent spacing instead of margin-right */
  padding: 1rem;         /* breathing space inside container */
  box-sizing: border-box;
}


.filter{
  flex: 0 1 auto;
  text-align: center;
  margin-right: 2rem;
  margin-top: 2rem;
  opacity: 0.7;
  color: black;
   
}
.filter:hover{
  opacity: 1;
  cursor: pointer;
}
.filter p{
  font-size:0.8rem;
   margin: 0.5rem 0 0;
}
.tax-info{
display:none;/*visibility:hidden means cheex jagah gher rahati woh gayab hojayegi pr jagah gayab hone ka baad jitani gher rahi thi uthani gherti rahegi ,pr display none woh cheez nhi karta gayab ka baad woh jagah nhi gherata hai*/
}
/*
.tax-toggle{
  border: 1px solid black;
  border-radius:1rem;
  height: 3.2rem;
  padding :1rem;
  margin-left: 3rem;
  display:flex;
  align-items:center ;
  justify-content: center;
  white-space: normal;   
  word-break: break-word; 
  text-align: center;    
  max-width: 100%;     

}
*/
.tax-toggle {
  border: 1px solid black;
  border-radius: 1rem;
  padding: 0.5rem 1rem;
  display: flex;
  align-items: center;
  justify-content: center;
  flex: 0 0 auto;
  white-space: normal;   /* ✅ allow wrapping */
  word-break: break-word; /* ✅ break long words if needed */
  text-align: center;    /* ✅ center text nicely */
  max-width: 100%;       /* ✅ never overflow */
}


@media (max-width: 768px) {
  .tax-toggle {
    width: 100%;
    margin: 0.5rem 0;
    justify-content: center;
    text-align: center;
  }
}
 

@media (max-width: 768px) {
  #filters {
    flex-wrap: nowrap;          /* prevent wrapping */
    overflow-x: auto;           /* horizontal scroll */
    -webkit-overflow-scrolling: touch; /* smooth scroll on iOS */
  }

  .filter {
    margin: 0 0.5rem;
  }

  .tax-toggle {
    margin-left: 0.5rem;
  }

  /* Hide scrollbar in WebKit browsers */
  #filters::-webkit-scrollbar {
    display: none;
  }
}
  
</style>
<div id="filters">
  <a href="/listings/indexes?category=Trending" >
  <div class="filter">
    <div><i class="fa-solid fa-fire"></i></div>
    <p> Trending</p>
  </div>
</a>

 <a href="/listings/indexes?category=Rooms">
  <div class="filter">
    <div><i class="fa-solid fa-bed"></i></div>
    <p>Rooms</p>
  </div>
</a>

 <a href="/listings/indexes?category=Iconic Cities">
    <div class="filter">
    <div><i class="fa-solid fa-city"></i></div>
    <p>Iconic Cities</p>
  </div>
</a>

<a href="/listings/indexes?category=Mountains">
  <div class="filter">
    <div><i class="fa-solid fa-mountain"></i></div>
    <p>Mountains</p>
  </div>
 </a>
 
 <a href="/listings/indexes?category=Castles">
    <div class="filter">
    <div><i class="fa-solid fa-chess-rook"></i></div>
    <p>Castles</p>
  </div>
  </a>

  <a href="/listings/indexes?category=Amazing Pools">
  <div class="filter">
    <div><i class="fa-solid fa-person-swimming"></i></div>
    <p>Amazing Pools</p>
  </div>
  </a>

  <a href="/listings/indexes?category=Camping">
   <div class="filter">
    <div><i class="fa-solid fa-tent"></i></div>
    <p>Camping</p>
  </div>
  </a>

  <a href="/listings/indexes?category=Farms">
    <div class="filter">
    <div><i class="fa-solid fa-cow"></i></div>
    <p>Farms</p>
  </div>
  </a>

  <a href="/listings/indexes?category=Arctic">
  <div class="filter">
    <div><i class="fa-solid fa-snowflake"></i></i></div>
    <p>Arctic</p>
  </div>
</a>
   

 

  <div class="tax-toggle">
    <div class="form-check-reverse form-switch">
  <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
  <label class="form-check-label" for="switchCheckDefault">Display total after taxes</label>
</div>
  </div>
</div>


<div class="w row-cols-lg-3 row-cols-md-3 row-cols-sm-1 mt-3   ">
 <% for(let listing of allListings){%>
    <a href="/listings/<%=listing._id%>" class="listing-link">
    
<div class="card col listing-card" style="width:20rem" >
  <img src="<%=listing.image.url%>" class="card-img-top" alt="listing_image" style="height:20rem"/>
  <div class="card-img-overlay"></div>
  <div class="card-body">
    <p class="card-text">
       <b> <%=listing.title%></b><br/>
       &#8377;<%=listing.price.toLocaleString("en-IN")%> / night
   <i class="tax-info"> &nbsp;&nbsp; +18% GST</i>
      </p>
  </div>
</div>

</a>
 <%}%>
 </div>




<script>
let taxSwitch=document.getElementById("switchCheckDefault");
taxSwitch.addEventListener("click",()=>{
  let taxInfo=document.getElementsByClassName("tax-info");
  console.log(taxInfo);
  for(info of taxInfo){
    if(info.style.display != "inline"){
      info.style.display="inline";
    }else{
      info.style.display="none";
    }
  }
});

</script>

<!--<div id="filters">
  <a href="/listings/indexes?category=Trending" >
  <div class="filter">
    <div><i class="fa-solid fa-fire"></i></div>
    <p> Trending</p>
  </div>
</a>

 <a href="/listings/indexes?category=Rooms">
  <div class="filter">
    <div><i class="fa-solid fa-bed"></i></div>
    <p>Rooms</p>
  </div>
</a>

 <a href="/listings/indexes?category=IconicCities">
    <div class="filter">
    <div><i class="fa-solid fa-city"></i></div>
    <p>Iconic Cities</p>
  </div>
</a>

<a href="/listings/indexes?category=Mountains">
  <div class="filter">
    <div><i class="fa-solid fa-mountain"></i></div>
    <p>Mountains</p>
  </div>
 </a>
 
 <a href="/listings/indexes?category=Castles">
    <div class="filter">
    <div><i class="fa-solid fa-chess-rook"></i></div>
    <p>Castles</p>
  </div>
  </a>

  <a href="/listings/indexes?category=AmazingPools">
  <div class="filter">
    <div><i class="fa-solid fa-person-swimming"></i></div>
    <p>Amazing Pools</p>
  </div>
  </a>

  <a href="/listings/indexes?category=Camping">
   <div class="filter">
    <div><i class="fa-solid fa-tent"></i></div>
    <p>Camping</p>
  </div>
  </a>

  <a href="/listings/indexes?category=Farms">
    <div class="filter">
    <div><i class="fa-solid fa-cow"></i></div>
    <p>Farms</p>
  </div>
  </a>

  <a href="/listings/indexes?category=Arctic">
  <div class="filter">
    <div><i class="fa-solid fa-snowflake"></i></i></div>
    <p>Arctic</p>
  </div>
</a>
 -->